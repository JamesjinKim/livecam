# π¥ λΌμ¦λ² λ¦¬νμ΄ 5 λΈ”λ™λ°•μ¤ μ‹μ¤ν…

> **λ“€μ–Ό μΉ΄λ©”λΌ κΈ°λ° μ‹¤μ‹κ°„ μμƒ λ…Ήν™” λ° μ¤νΈλ¦¬λ° μ‹μ¤ν…**

[![Platform](https://img.shields.io/badge/Platform-Raspberry%20Pi%205-red)](https://www.raspberrypi.org/)
[![Camera](https://img.shields.io/badge/Camera-OV5647%20Dual-blue)](https://www.uctronics.com/)
[![Video](https://img.shields.io/badge/Format-MP4%20H.264-green)](https://en.wikipedia.org/wiki/H.264)
[![FPS](https://img.shields.io/badge/FPS-30-yellow)](https://en.wikipedia.org/wiki/Frame_rate)

## π“ μ‹μ¤ν… κ°μ”

λΌμ¦λ² λ¦¬νμ΄ 5 κΈ°λ° κ³ μ„±λ¥ λΈ”λ™λ°•μ¤ μ‹μ¤ν…μΌλ΅ **λ“€μ–Ό μΉ΄λ©”λΌ λ™μ‹ λ…Ήν™”**, **μ‹¤μ‹κ°„ μ›Ή μ¤νΈλ¦¬λ°**, **λ‹¤μ¤‘ ν•΄μƒλ„ μ§€μ›**μ„ μ κ³µν•©λ‹λ‹¤.

### β¨ μ£Όμ” νΉμ§•
- π¬ **λ“€μ–Ό μΉ΄λ©”λΌ λ™μ‹ λ…Ήν™”** - μ „λ°©/ν›„λ°© λ…λ¦½μ  μμƒ μ €μ¥
- π“Ί **λ‹¤μ¤‘ ν•΄μƒλ„ μ§€μ›** - 640x480, 1280x720, 1920x1080
- π― **30fps μ•μ •μ  λ…Ήν™”** - H.264 ν•λ“μ›¨μ–΄ μΈμ½”λ”©
- π **μ‹¤μ‹κ°„ μ›Ή μ¤νΈλ¦¬λ°** - MJPEG HTTP μ„λ²„ λ‚΄μ¥
- π’Ύ **MP4 μ§μ ‘ μ €μ¥** - λ³€ν™ μ—†μ΄ λ°”λ΅ μ¬μƒ κ°€λ¥
- β΅ **κ°„λ‹¨ν• μ‚¬μ©λ²•** - ν• μ¤„ λ…λ ΉμΌλ΅ μ¦‰μ‹ μ‹¤ν–‰

## π€ λΉ λ¥Έ μ‹μ‘

### 1λ‹¨κ³„: μΉ΄λ©”λΌ ν™•μΈ
```bash
rpicam-hello --list-cameras
```

### 2λ‹¨κ³„: λ“€μ–Ό μΉ΄λ©”λΌ ν…μ¤νΈ
```bash
cd ~/livecam
./start_blackbox.sh quick
```

### 3λ‹¨κ³„: λ³Έκ²© λ…Ήν™”
```bash
# 640x480 λ“€μ–Ό λ…Ήν™”
./start_blackbox.sh dual-640

# Ctrl+Cλ΅ μ¤‘λ‹¨ν•λ©΄ μλ™μΌλ΅ MP4 μ €μ¥
```

## π® μ‚¬μ© λ°©λ²•

### π“Ή λ‹¨μΌ μΉ΄λ©”λΌ λ¨λ“
```bash
./start_blackbox.sh cam0-640      # μΉ΄λ©”λΌ 0λ² - 640x480
./start_blackbox.sh cam1-640      # μΉ΄λ©”λΌ 1λ² - 640x480
./start_blackbox.sh cam0-720p     # μΉ΄λ©”λΌ 0λ² - 1280x720
./start_blackbox.sh cam1-720p     # μΉ΄λ©”λΌ 1λ² - 1280x720
./start_blackbox.sh cam0-1080p    # μΉ΄λ©”λΌ 0λ² - 1920x1080
./start_blackbox.sh cam1-1080p    # μΉ΄λ©”λΌ 1λ² - 1920x1080
```

### π¬ λ“€μ–Ό μΉ΄λ©”λΌ λ¨λ“
```bash
./start_blackbox.sh dual-640      # λ‘ μΉ΄λ©”λΌ λ™μ‹ - 640x480
./start_blackbox.sh dual-720p     # λ‘ μΉ΄λ©”λΌ λ™μ‹ - 1280x720
./start_blackbox.sh dual-1080p    # λ‘ μΉ΄λ©”λΌ λ™μ‹ - 1920x1080
```

### π μ¤νΈλ¦¬λ° λ¨λ“
```bash
# π― λ‹¨μΌ ν΄λΌμ΄μ–ΈνΈ κ³ ν’μ§ μ¤νΈλ¦¬λ° (κ¶μ¥)
./start_streaming.sh single

# π‘¥ λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ μ¤νΈλ¦¬λ°
./start_streaming.sh multi

# λΈλΌμ°μ €μ—μ„ http://λΌμ¦λ² λ¦¬νμ΄IP:8000/ μ ‘μ†
```

### β΅ ν…μ¤νΈ λ¨λ“
```bash
./start_blackbox.sh quick         # 3μ΄ λ“€μ–Ό μΉ΄λ©”λΌ ν…μ¤νΈ
./start_blackbox.sh demo          # 10μ΄ λ¨λ“  ν•΄μƒλ„ λ°λ¨
```

## π“ μ„±λ¥ μ‚¬μ–‘

| λ¨λ“ | ν•΄μƒλ„ | μμƒ CPU | νμΌν¬κΈ°/10μ΄ | νΉμ§• |
|------|--------|---------|---------------|------|
| **λ‹¨μΌ 640** | 640Γ—480 | ~10% | ~1.5MB | κΈ°λ³Έ λ¨λ“ |
| **λ‹¨μΌ 720p** | 1280Γ—720 | ~15% | ~12MB | HD ν™”μ§ |
| **λ‹¨μΌ 1080p** | 1920Γ—1080 | ~20% | ~25MB | ν’€HD ν™”μ§ |
| **λ“€μ–Ό 640** | 640Γ—480 Γ— 2 | ~20% | ~2.5MB | λ“€μ–Ό κΈ°λ³Έ |
| **λ“€μ–Ό 720p** | 1280Γ—720 Γ— 2 | ~30% | ~25MB | λ“€μ–Ό HD |
| **λ“€μ–Ό 1080p** | 1920Γ—1080 Γ— 2 | ~40% | ~50MB | λ“€μ–Ό ν’€HD |
| **μ¤νΈλ¦¬λ° κ³ ν’μ§** | 640Γ—480 | ~12% | - | λ‹¨μΌ ν΄λΌμ΄μ–ΈνΈ 90% |
| **μ¤νΈλ¦¬λ° λ‹¤μ¤‘** | 640Γ—480 | ~15% | - | λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ 70% |

## π“ μ €μ¥ κµ¬μ΅°

μμƒ νμΌμ€ ν•΄μƒλ„μ™€ μΉ΄λ©”λΌλ³„λ΅ μλ™ λ¶„λ¥λ©λ‹λ‹¤:

```
videos/
β”β”€β”€ 640x480/
β”‚   β”β”€β”€ cam0/          # μΉ΄λ©”λΌ 0λ² 640x480 μμƒ
β”‚   β””β”€β”€ cam1/          # μΉ΄λ©”λΌ 1λ² 640x480 μμƒ
β”β”€β”€ 1280x720/
β”‚   β”β”€β”€ cam0/          # μΉ΄λ©”λΌ 0λ² 720p μμƒ
β”‚   β””β”€β”€ cam1/          # μΉ΄λ©”λΌ 1λ² 720p μμƒ
β””β”€β”€ 1920x1080/
    β”β”€β”€ cam0/          # μΉ΄λ©”λΌ 0λ² 1080p μμƒ
    β””β”€β”€ cam1/          # μΉ΄λ©”λΌ 1λ² 1080p μμƒ
```

## π’» μ‹μ¤ν… μ”κµ¬μ‚¬ν•­

### ν•λ“μ›¨μ–΄
- **Raspberry Pi 5** (4GB RAM μ΄μƒ κ¶μ¥)
- **OV5647 μΉ΄λ©”λΌ λ¨λ“** Γ— 1~2κ°
- **32GB+ microSD μΉ΄λ“** (Class 10)
- **5V/3A μ „μ› μ–΄λ‘ν„°**

### μ†ν”„νΈμ›¨μ–΄
- **Raspberry Pi OS** (64-bit)
- **rpicam-apps** (μΉ΄λ©”λΌ μ†ν”„νΈμ›¨μ–΄)
- **FFmpeg** (μμƒ λ¶„μ„μ©)

## π”§ μ„¤μΉ λ°©λ²•

### 1. κΈ°λ³Έ ν¨ν‚¤μ§€ μ„¤μΉ
```bash
sudo apt update
sudo apt install rpicam-apps ffmpeg libjpeg-dev build-essential
```

### 2. ν”„λ΅μ νΈ λ‹¤μ΄λ΅λ“
```bash
cd ~
git clone [μ €μ¥μ†_URL] livecam
cd livecam
chmod +x start_blackbox.sh
```

### 3. μΉ΄λ©”λΌ ν™μ„±ν™”
```bash
sudo raspi-config
# Interface Options β†’ Camera β†’ Enable
# μ¬λ¶€ν…
```

## π”„ μ‹¤μ‹κ°„ μ¤νΈλ¦¬λ°

**μƒλ΅μ΄ 2κ°€μ§€ μ¤νΈλ¦¬λ° λ¨λ“ μ§€μ›**

### π― λ‹¨μΌ ν΄λΌμ΄μ–ΈνΈ κ³ ν’μ§ λ¨λ“ (κ¶μ¥)
```bash
./start_streaming.sh single
```
- **MJPEG 90% μµκ³ ν’μ§** - μ„ λ…ν• ν™”μ§
- **25fps λ¶€λ“λ¬μ΄ μ¬μƒ** - κ³ μ„±λ¥ ν”„λ μ„λ μ΄νΈ  
- **1λ…λ§ μ ‘μ† κ°€λ¥** - μƒ μ ‘μ† μ‹ κΈ°μ΅΄ μ—°κ²° ν•΄μ 
- **CPU 12% μ•μ •μ ** - λ‹¨μΌ μ—°κ²°λ΅ ν¨μ¨μ 

### π‘¥ λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ λ¨λ“
```bash
./start_streaming.sh multi
```
- **MJPEG 70% μµμ ν™”** - μ•μ •λ ν™”μ§
- **20fps ν‘μ¤€ μ¬μƒ** - λ‹¤μ¤‘ μ ‘μ† μµμ ν™”
- **λ™μ‹ λ‹¤μ¤‘ μ ‘μ†** - μ—¬λ¬ λ…μ΄ λ™μ‹ μ‹μ²­ κ°€λ¥
- **CPU 15% κ²½μ μ ** - λ¦¬μ†μ¤ λ¶„μ‚° μ²λ¦¬

### μ ‘μ† λ°©λ²•
- **μ›Ή λΈλΌμ°μ €**: `http://λΌμ¦λ² λ¦¬νμ΄IP:8000/`

### μ£Όμ” κ°μ„ μ‚¬ν•­
- **ν”„λ μ„ λ¬΄κ²°μ„± λ³΄μ¥**: JPEG λ§μ»¤ κΈ°μ¤€ μ•μ „ν• λ²„νΌ μ²λ¦¬λ΅ ν™”λ©΄ κΉ¨μ§ μ™„μ „ ν•΄κ²°
- **κ·Ήν• CPU μµμ ν™”**: 21.2% β†’ 5.4% (74% κ°μ†)
- **λ©”λ¨λ¦¬ μµμ ν™”**: ν¨μ¨μ μΈ λ²„νΌ κ΄€λ¦¬ λ° memoryview ν™μ©
- **μ•μ •μ  ν’μ§**: 640x480@20fps, MJPEG 70% (CPU μµμ ν™” λ²„μ „)

## π› οΈ λ¬Έμ  ν•΄κ²°

### μΉ΄λ©”λΌ μΈμ‹ μ•λ¨
```bash
# μΉ΄λ©”λΌ μƒνƒ ν™•μΈ
rpicam-hello --list-cameras

# μ¬λ¶€ν… ν›„ μ¬μ‹λ„
sudo reboot
```

### κ¶ν• μ¤λ¥
```bash
# μ‹¤ν–‰ κ¶ν• λ¶€μ—¬
chmod +x start_blackbox.sh

# video κ·Έλ£Ή μ¶”κ°€
sudo usermod -a -G video $USER
```

### π μ¤νΈλ¦¬λ° λ¬Έμ  ν•΄κ²°

#### ν™”λ©΄ κΉ¨μ§ ν„μƒ
```bash
# κ°μ„ λ μ„λ²„ μ‚¬μ© (ν™”λ©΄ κΉ¨μ§ λ¬Έμ  ν•΄κ²°λ¨)
source venv/bin/activate && python streaming_server_fixed.py
```

#### μμ΅΄μ„± μ„¤μΉ
```bash
python3 -m venv venv
source venv/bin/activate
pip install fastapi uvicorn
```

### μ €μ¥ κ³µκ°„ λ¶€μ΅±
```bash
# κ³µκ°„ ν™•μΈ
df -h

# μ¤λλ μμƒ μ‚­μ  (7μΌ μ΄μƒ)
find videos/ -name "*.mp4" -mtime +7 -delete
```

## π“‹ κ°λ°μ μ •λ³΄

### ν”„λ΅μ νΈ κµ¬μ΅°
```
livecam/
β”β”€β”€ README.md                    # μ‚¬μ©μ κ°€μ΄λ“
β”β”€β”€ CLAUDE.md                    # κ°λ°μ κΈ°μ  λ¬Έμ„  
β”β”€β”€ start_blackbox.sh           # λΈ”λ™λ°•μ¤ λ…Ήν™” μ¤ν¬λ¦½νΈ β­
β”β”€β”€ start_streaming.sh          # μ¤νΈλ¦¬λ° μ„λ²„ μ‹¤ν–‰ μ¤ν¬λ¦½νΈ β­
β”β”€β”€ venv/                       # Python κ°€μƒν™κ²½
β”β”€β”€ src/                        # μ†μ¤μ½”λ“ λ””λ ‰ν† λ¦¬
β”‚   β”β”€β”€ streaming/              # μ¤νΈλ¦¬λ° μ„λ²„
β”‚   β”‚   β”β”€β”€ stream_server.py    # λ‹¨μΌ ν΄λΌμ΄μ–ΈνΈ κ³ ν’μ§ μ„λ²„ β­
β”‚   β”‚   β””β”€β”€ stream_multi.py     # λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ μ„λ²„ β­
β”‚   β”β”€β”€ core/                   # C++ ν•µμ‹¬ μ†μ¤ (μ‹¤ν—μ )
β”‚   β””β”€β”€ optimized/              # μµμ ν™” κµ¬ν„
β”β”€β”€ scripts/                    # μ ν‹Έλ¦¬ν‹° μ¤ν¬λ¦½νΈ
β””β”€β”€ videos/                     # μμƒ μ €μ¥ λ””λ ‰ν† λ¦¬
    β”β”€β”€ 640x480/               # κΈ°λ³Έ ν•΄μƒλ„
    β”β”€β”€ 1280x720/              # HD ν•΄μƒλ„  
    β””β”€β”€ 1920x1080/             # ν’€HD ν•΄μƒλ„
```

### ν•µμ‹¬ μ‹μ¤ν…
- **`start_blackbox.sh`**: λ“€μ–Ό μΉ΄λ©”λΌ λΈ”λ™λ°•μ¤ λ…Ήν™” (λ©”μΈ)
- **`start_streaming.sh`**: 2κ°€μ§€ λ¨λ“ μ¤νΈλ¦¬λ° μ„λ²„ (λ‹¨μΌ/λ‹¤μ¤‘)
- **`src/streaming/stream_server.py`**: λ‹¨μΌ ν΄λΌμ΄μ–ΈνΈ 90% κ³ ν’μ§ μ„λ²„
- **`src/streaming/stream_multi.py`**: λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ 70% μµμ ν™” μ„λ²„

## π“ μ§€μ›

- **μ΄μ λ¦¬ν¬νΈ**: GitHub Issues
- **κΈ°λ¥ μ”μ²­**: GitHub Discussions  
- **κΈ°μ  λ¬Έμ**: κ°λ°ν€ μ΄λ©”μΌ

---

π€ μ‚¬μ©λ²• μ”μ•½

### λΈ”λ™λ°•μ¤ λ…Ήν™”
```bash
./start_blackbox.sh dual-640    # λ“€μ–Ό μΉ΄λ©”λΌ λ…Ήν™”
```

### μ›Ή μ¤νΈλ¦¬λ° (μƒλ΅μ΄ 2κ°€μ§€ λ¨λ“)
```bash
# π― λ‹¨μΌ ν΄λΌμ΄μ–ΈνΈ 90% κ³ ν’μ§ (κ¶μ¥)
./start_streaming.sh single

# π‘¥ λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ 70% μµμ ν™”  
./start_streaming.sh multi

# http://λΌμ¦λ² λ¦¬νμ΄IP:8000/ μ ‘μ†
```

### β οΈ ν„μ¬ μ ν•μ‚¬ν•­
- **μ¤νΈλ¦¬λ° μ¤‘ λ³„λ„ λ…Ήν™” λ¶κ°€**: μΉ΄λ©”λΌ λ¦¬μ†μ¤ μ¶©λ
- **λ‹¨μΌ λ¨λ“**: μƒ μ ‘μ† μ‹ κΈ°μ΅΄ μ—°κ²° μλ™ ν•΄μ 
- **ν•΄κ²°μ±…**: μ¤νΈλ¦¬λ° λλ” λ…Ήν™” μ¤‘ ν•λ‚λ§ μ„ νƒ μ‚¬μ©

### π― μµμ ν™” μ„±κ³Ό
- **CPU μ‚¬μ©λ¥ **: 21.2% β†’ **5.4%** (74% κ°μ†)
- **ν™”λ©΄ μ•μ •μ„±**: 2λ¶„ ν›„ κΉ¨μ§ β†’ **μ™„μ „ μ•μ •**
- **ν™”μ§ νμ‹ **: λ‹¨μΌ λ¨λ“μ—μ„ **MJPEG 90% κ³ ν’μ§** μ§€μ›
- **μ‚¬μ©νΈμμ„±**: λ‹¨μΌ λ…λ Ήμ–΄ `./start_streaming.sh [mode]`λ΅ κ°„νΈ μ‹¤ν–‰
