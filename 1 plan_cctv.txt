1. 단일 클라이언트 제한

  # 최대 1개 클라이언트만 허용
  active_clients = set()
  MAX_CLIENTS = 1

  # 스트림 요청 시 제한 확인
  if len(active_clients) >= MAX_CLIENTS and client_ip not in active_clients:
      raise HTTPException(status_code=423, detail="Maximum 1 client allowed")

  2. 클라이언트 세션 관리

  - 클라이언트 IP 기반 추적
  - 연결 시 active_clients에 추가
  - 연결 종료 시 자동 제거
  - 로그로 연결/해제 상태 표시

  3. 웹 UI 알림 시스템

  - 다른 사용자 접속 시 "❌ 다른 사용자가 스트리밍 중입니다" 표시
  - 3초마다 연결 상태 자동 체크
  - 423 HTTP 상태 코드로 제한 감지

  📊 예상 로그 변화:

  기존 (다중 클라이언트):
  🌐 Stream request for camera 0    # 127.0.0.1
  🌐 Stream request for camera 0    # 192.168.0.21
  fps 저하: 31fps → 15.5fps

  개선 (단일 클라이언트):
  🌐 Stream request for camera 0
  👥 Client connected: 127.0.0.1 (Total: 1)
  🚫 Stream request rejected: 192.168.0.21 (Max clients: 1)
  fps 안정: 31fps 유지

  🎯 결과:

  - 안정적인 fps: 다중 스트림으로 인한 프레임 드롭 방지
  - 리소스 보호: 카메라 리소스 경합 해결
  - 사용자 알림: 제한 상황을 명확히 표시

  이제 CCTV가 단일 클라이언트만 허용하여 안정적으로 작동합니다!